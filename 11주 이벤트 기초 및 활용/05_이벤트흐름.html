<!DOCTYPE html>
<html>
<head>
	<title>이벤트흐름</title>
</head>
<body>
	<p style="color:blue">이것은<span style="color:red" id="span">문장입니다.</span></p>
	<form>
		<input type="text" name="s">
		<input type="button" value="테스트" id="button">
		<hr>
	</form>
	<div id="div" style="color:green"></div>
	<script>
		var div = document.getElementById("div"); // 이벤트메시지출력공간
		var button = document.getElementById("button");
		// body 객체에캡쳐리스너등록
		document.body.addEventListener("click", capture, true); // 캡쳐단계(1)
		// 타겟객체에버블리스너등록
		button.addEventListener("click", bubble, false); // 버블단계(2)
		// body 객체에버블리스너등록
		document.body.addEventListener("click", bubble, false); // 버블단계(3)
		function capture(e) {// e는이벤트객체
			var obj= e.currentTarget; // 현재이벤트를받은DOM 객체
			var tagName= obj.tagName;// 태그이름
			div.innerHTML+= "<br>capture 단계: "+ tagName+ " 태그"+ e.type+ "이벤트";
		}
		function bubble(e) {// e는이벤트객체
			var obj= e.currentTarget; // 현재이벤트를받은DOM 객체
			var tagName= obj.tagName; // 태그이름
			div.innerHTML+= "<br>bubble 단계: "+ tagName+ " 태그"+ e.type+ "이벤트";
		}
	</script>
</body>
</html>